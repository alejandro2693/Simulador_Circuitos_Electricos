<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Circuitos Interactivos</title>
    <link rel="stylesheet" href="style.css">
    <!-- Google Fonts for modern look -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>

<body>

    <header class="app-header">
        <div class="header-left">
            <h1>‚ö° Simulador de Circuitos Lab</h1>
        </div>
        <div class="header-right">
            <button id="btn-reset" class="btn btn-secondary">Reiniciar</button>
            <button id="btn-screenshot" class="btn btn-icon" title="Guardar Captura (JPG)">üì∑</button>
            <button id="btn-help" class="btn btn-icon">?</button>
        </div>
    </header>

    <main class="app-container">
        <!-- Toolbar / Component Palette -->
        <aside class="sidebar">
            <h2>Componentes</h2>
            <div class="component-palette">
                <div class="draggable-item" data-type="battery" draggable="true">
                    <div class="icon">üîã</div>
                    <span>Bater√≠a</span>
                </div>
                <div class="draggable-item" data-type="bulb" draggable="true">
                    <div class="icon">üí°</div>
                    <span>Bombilla</span>
                </div>
                <div class="draggable-item" data-type="switch" draggable="true">
                    <div class="icon">_/_</div>
                    <span>Interruptor</span>
                </div>
                <div class="draggable-item" data-type="pushbutton" draggable="true">
                    <div class="icon">üîò</div>
                    <span>Pulsador</span>
                </div>
                <div class="draggable-item" data-type="resistor" draggable="true">
                    <div class="icon">„Ä∞Ô∏è</div>
                    <span>Resistencia</span>
                </div>
                <div class="draggable-item" data-type="led" draggable="true">
                    <div class="icon">üî¥</div>
                    <span>LED</span>
                </div>
                <div class="draggable-item" data-type="voltmeter" draggable="true">
                    <div class="icon">V</div>
                    <span>Volt√≠metro</span>
                </div>
                <div class="draggable-item" data-type="ammeter" draggable="true">
                    <div class="icon">A</div>
                    <span>Amper√≠metro</span>
                </div>
                <!-- New Components -->
                <div class="draggable-item" data-type="motor" draggable="true">
                    <div class="icon">‚öôÔ∏è</div>
                    <span>Motor</span>
                </div>
                <div class="draggable-item" data-type="spdt" draggable="true">
                    <div class="icon">üîÄ</div>
                    <span>Conmutador</span>
                </div>
                <div class="draggable-item" data-type="buzzer" draggable="true">
                    <div class="icon">üîä</div>
                    <span>Zumbador</span>
                </div>
                <div class="draggable-item" data-type="ldr" draggable="true">
                    <div class="icon">‚òÄÔ∏è</div>
                    <span>LDR</span>
                </div>
                <div class="draggable-item" data-type="potentiometer" draggable="true">
                    <div class="icon">üéöÔ∏è</div>
                    <span>Potenci√≥metro</span>
                </div>
            </div>

            <div class="info-panel">
                <h3>Propiedades</h3>
                <div id="controls-area" style="margin-bottom:10px; display:none;">
                    <button class="btn btn-secondary"
                        style="color:#333; border:1px solid #ccc; width:100%; margin-bottom:5px;"
                        onclick="rotateSelected()">‚Üª Girar (R)</button>
                    <button class="btn btn-secondary" style="color:red; border:1px solid #ccc; width:100%;"
                        onclick="deleteSelected()">üóëÔ∏è Borrar (Del)</button>
                </div>
                <div id="properties-content">
                    <p class="placeholder-text">Selecciona un componente para editar sus valores.</p>
                </div>
            </div>
        </aside>

        <!-- Main Simulation Area -->
        <div class="canvas-wrapper">
            <canvas id="circuit-canvas"></canvas>
            <div id="tooltip" class="tooltip hidden"></div>
        </div>
    </main>

    <!-- Help Modal -->
    <!-- Help Modal -->
    <div id="help-modal" class="modal" style="display: block;">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>üìñ Gu√≠a de Uso del Simulador</h2>
            <div class="help-text">
                <h3>Componentes B√°sicos</h3>
                <ul>
                    <li><strong>Arrastrar y Soltar:</strong> Selecciona componentes del men√∫ izquierdo y arr√°stralos al
                        lienzo.</li>
                    <li><strong>Bater√≠a:</strong> Fuente de energ√≠a. Ajusta su voltaje en el panel derecho.</li>
                    <li><strong>Mover:</strong> Arrastra cualquier componente para reorganizarlo.</li>
                    <li><strong>Rotar:</strong> Selecciona y pulsa <code>R</code> o el bot√≥n "Girar".</li>
                    <li><strong>Borrar:</strong> Selecciona y pulsa <code>Supr</code> o el bot√≥n "Borrar".</li>
                </ul>

                <h3>Conexiones y Cables</h3>
                <ul>
                    <li><strong>Crear Cable:</strong> Clic en un terminal -> Arrastra -> Suelta en otro terminal.</li>
                    <li><strong>Ramificar (Puntos de Uni√≥n):</strong> Pulsa un cable para seleccionarlo y pulsa
                        "Dividir" en propiedades para a√±adir un nodo (punto negro).</li>
                    <li><strong>Mover Nodos:</strong> Los puntos de uni√≥n (nodos) tienen un icono de manita (üñêÔ∏è). Pulsa
                        y arrastra ese icono para mover el nodo.</li>
                    <li><strong>Borrar Cable:</strong> Pulsa una vez sobre el cable (se resaltar√° en
                        <strong>Naranja</strong>) y usa el bot√≥n <strong>Eliminar</strong> en el panel de propiedades.
                    </li>
                </ul>

                <h3>Componentes Especiales</h3>
                <ul>
                    <li><strong>Interruptor:</strong> Clic para Abrir/Cerrar.</li>
                    <li><strong>Pulsador:</strong> Funciona solo mientras lo mantienes presionado.</li>
                    <li><strong>Conmutador (SPDT):</strong> Interruptor de 3 v√≠as. Clic para alternar la salida
                        (Arriba/Abajo).</li>
                    <li><strong>LED:</strong> ‚ö†Ô∏è Polaridad importante. Explota si I > 20mA (aprox > 1.8V sin
                        resistencia).</li>
                    <li><strong>Motor:</strong> Gira m√°s r√°pido cuanto m√°s corriente circula.</li>
                    <li><strong>Zumbador:</strong> Emite sonido/vibraci√≥n cuando pasa corriente.</li>
                    <li><strong>LDR:</strong> Resistencia var√≠a con la luz. Usa el deslizador "Luz" en propiedades.</li>
                    <li><strong>Potenci√≥metro:</strong> Resistencia variable. Usa el deslizador "Ajuste" en propiedades.
                    </li>
                </ul>
                <h3>Herramientas</h3>
                <ul>
                    <li><strong>Captura de Pantalla (üì∑):</strong> Descarga una imagen de tu circuito actual.</li>
                </ul>

                <h3 style="color: var(--primary-color);">üì± Uso en Tablet / M√≥vil</h3>
                <ul>
                    <li><strong>Men√∫ de Componentes:</strong> Desliza (scroll) hacia abajo para ver todos los
                        componentes disponibles.</li>
                    <li><strong>Arrastrar:</strong> Pulsa un componente del men√∫ y arr√°stralo directamente al lienzo.
                    </li>
                    <li><strong>Selecci√≥n:</strong> Pulsa sobre un componente o cable (se pondr√° naranja) para editarlo
                        o borrarlo desde el panel.</li>
                    <li><strong>Mover Puntos:</strong> Usa el icono de la manita (üñêÔ∏è) para arrastrar y reposicionar
                        puntos de uni√≥n.</li>
                </ul>

            </div>
            <div style="margin-top: 20px; text-align: right;">
                <button id="close-help-btn" class="btn btn-primary">Entendido, cerrar</button>
            </div>
        </div>
    </div>
    <!-- Footer -->
    <div class="app-footer">
        Simulador realizado por Alejandro P√©rez S√°nchez, haciendo uso de la herramienta Google Antigravity, pueden
        existir errores. Contacto: alpersan@gobiernodecanarias.org
    </div>

    <script src="engine.js"></script>
    <script src="script.js"></script>
</body>

</html>